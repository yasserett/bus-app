<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org" lang="fr">
<head>
	<meta charset="UTF-8">
	<title>Insert title here</title>
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
	   integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
	   crossorigin=""/>
	<script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
	   integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
	   crossorigin=""></script>
	<style>
		#map {height: 600px;}
	</style>
</head>
<body>
	 <div id="map"></div>
	 <div class="row">
			<div class="col-md-8 offset-2">
				<table class="table">
					<thead>
						<tr>
							<th>Id</th>
							<th>Name</th>
							<th>Route</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td th:text="${trajet.id}"></td>
							<td th:text="${trajet.name}"></td>
							<td th:each="point : ${trajet.route.getCoordinates()}">
								[<span th:text="${point.getX()}"></span>,<span th:text="${point.getY()}"></span>]
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	<script th:inline="javascript">
      /*<![CDATA[*/
         let latlngtrajet = /*[[${trajet.getLngLat()}]]*/ null;
         let latlngstation = /*[[${station.getLngLat()}]]*/ null;
         let stationname = /*[[${station.getName()}]]*/ null;
         console.log(latlngtrajet);
         console.log(latlngstation);
      /*]]>*/
	</script>
	 <script>
	 	let map = L.map('map').setView([34.016317,-6.835519], 15);
	 	L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoieWFzc2VyZXR0IiwiYSI6ImNrNXkzaXd3NDAxZnMzZG9mYmc2bjJjd28ifQ.RnUZbOGi82VUwC9wdF_c8Q', {
	 	    attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
	 	    maxZoom: 20,
	 	    id: 'mapbox/streets-v11',	
	 	   accessToken: 'pk.eyJ1IjoieWFzc2VyZXR0IiwiYSI6ImNrNXkzaXd3NDAxZnMzZG9mYmc2bjJjd28ifQ.RnUZbOGi82VUwC9wdF_c8Q'
	 	}).addTo(map);
	 // create a red polyline from an array of LatLng points
	 	let polyline = L.polyline(latlngtrajet, {color: 'blue'}).addTo(map);
	 	let marker = L.marker(latlngstation).addTo(map);
	 // zoom the map to the polyline
	 	marker.bindPopup(stationname).openPopup();
	 	map.fitBounds(polyline.getBounds());
	 </script>
</body>
</html>